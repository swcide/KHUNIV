<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="humanBoardMapper">
 
  <resultMap type="HumanBoard" id="humanResultSet">
  		<id property="hId" column="HID"/>
  		<result property="hType" column="HTYPE"/>
		<result property="hTitle" column="HTITLE"/>
		<result property="hWriter" column="HWRITER"/>
		<result property="hWriter" column="HNAME"/>
		<result property="hContent" column="HCONTENT"/>
		<result property="hCount" column="HCOUNT"/>
		<result property="originalFilename" column="ORIGINAL_FILENAME"/>
		<result property="renameFilename" column="RENAME_FILENAME"/>
		<result property="hCount" column="HCOUNT"/>
		<result property="hCreateDate" column="H_CREATE_DATE"/>
		<result property="hModifyDate" column="H_MODIFY_DATE"/>
		<result property="hStatus" column="H_STATUS"/>
		<result property="hStatus" column="H_SECRET"/>
 	 </resultMap>
 	 
 	    <resultMap type="hReply" id="replyResultSet">
 	 	<id property="rId" column="H_RID"/>
		<result property="rContent" column="H_RCONTENT"/>
		<result property="refHid" column="H_REF_HID"/>
		<result property="rWriter" column="H_RWRITER"/>
		<result property="rCreateDate" column="H_R_CREATE_DATE"/>
		<result property="rmodifyDate" column="H_R_MODIFY_DATE"/>
		<result property="rStatus" column="H_R_STATUS"/>
		<result property="rName" column="H_RNAME"/>
		<result property="refRid" column="H_REF_RID"/>
		<result property="hType" column="HTYPE"/>
 	 </resultMap>
 	 
 	 	<select id="getListCount"  resultType="_int">
  		SELECT COUNT(*)
  		FROM TB_HUMAN_BOARD
  		WHERE H_STATUS='Y'	
 		</select>
		<select id="selectList" resultMap="humanResultSet">
 		SELECT *
		FROM TB_HUMAN_BOARD
		WHERE H_STATUS='Y'
		ORDER BY HID DESC
 	 </select>
 	 <update id="updateCount" parameterType="_int">
 	 	UPDATE TB_HUMAN_BOARD
 	 	SET HCOUNT = HCOUNT+1
 	 	WHERE HID=#{hId}
 	 </update>
 	  <select id="selectHumanBoard" resultMap="humanResultSet">
 	 	SELECT *
 	 	FROM TB_HUMAN_BOARD
 	 	WHERE HID=#{hId}
 	 	AND H_STATUS='Y'
 	 </select>
 	  <insert id="insertHumanBoard" parameterType="HumanBoard">
 	 	INSERT INTO TB_HUMAN_BOARD
 	 	VALUES(SEQ_HUMAN_HID.NEXTVAL,#{hType},#{hTitle},#{hContent},#{hWriter},#{hName},DEFAULT,DEFAULT,DEFAULT,DEFAULT,#{originalFilename},#{renameFilename},DEFAULT)
 	 </insert>
 	 
 	 <update id="updateHumanBoard"  parameterType="HumanBoard">
 	 	UPDATE TB_HUMAN_BOARD
 	 	SET HTITLE=#{hTitle},HCONTENT=#{hContent},ORIGINAL_FILENAME=#{originalFilename},RENAME_FILENAME=#{renameFilename},H_MODIFY_DATE=SYSDATE
 	 	WHERE HID=#{hId} 
 	 </update>
 	 
 	  <update id="deleteHumanBoard" parameterType="_int">
 	 	UPDATE TB_HUMAN_BOARD
 	 	SET H_STATUS ='N'
 	 	WHERE HID= #{hId}
 	 </update>
 	 <select id="selectHumanReplyList" parameterType="_int" resultMap="replyResultSet">
 	 	SELECT *
 	 	FROM TB_HUMAN_REPLY
 	 	WHERE H_REF_HID=#{nId}
 	 	AND H_R_STATUS='Y'
 	 	AND HTYPE=1
 	 	ORDER BY H_RID DESC
 	 </select>
 	 
 	  <insert id="insertReply" parameterType="Reply">
 	 	INSERT INTO TB_HUMAN_REPLY
 	 	VALUES(SEQ_H_RID.NEXTVAL,#{rContent},#{refNid},SYSDATE,SYSDATE,#{rWriter},DEFAULT,#{rName},#{refRid})
 	 </insert>
 	 <insert id="deleteReply" parameterType="Reply">
 	 	UPDATE TB_NOTICE_REPLY
 	 	SET  N_R_STATUS='N'
 		WHERE N_RID= #{rId}
 		OR N_REF_RID =#{rId}
 	 </insert>
 	 <insert id="updateReply" parameterType="Reply">
 	 	UPDATE TB_NOTICE_REPLY
 	 	SET  N_RCONTENT=#{rContent}
 		WHERE N_RID= #{rId}
 	 </insert>
</mapper>
